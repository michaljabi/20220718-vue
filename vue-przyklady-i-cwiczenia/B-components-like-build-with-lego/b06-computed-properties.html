<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wyliczane właściwości</title>
    <script src="https://unpkg.com/vue@next"></script>
</head>
<body>
    <!--
        #Przykład B-06:
        W Vue.js mamy możliwość "wyliczenia" wartości na podstawie np. kilku innych wartości lub
        na podstawie bardziej skomplikowanej logiki. Gdzie jeden ze składników może należeć do obiektu zwracanego przez "setup()" i zmienić się w czasie.
        Vue zachowuje się wtedy — dalej reaktywnie, przeliczając aktualną wartość "computed property"
        Zobacz poniższy przykład.

        #cel:
        Poznanie metody na obliczanie / aktualizacje wartości pola w komponencie
        na podstawie zmian i aktualizacji innych wartości pól składowych.
    -->
    <div id="app"></div>
    <script>

      const { ref, computed } = Vue;
      const WeatherSwitch = {
          template: `
            <div>
               <p> {{actualWeather}} </p>
               <button @click="changeTimeOfTheDay()">Zmień porę dnia</button>
            </div>
          `,
          setup() {
            const timeOfTheDay = ref('dzisiaj');
			      // const actualWeather = computed(() => `${timeOfTheDay.value} padało`)
            const actualWeather = `${timeOfTheDay.value} padało`
            // actualWeather.value = '!'
            const changeTimeOfTheDay = () => {
				        timeOfTheDay.value = timeOfTheDay.value === 'dzisiaj' ? 'wczoraj' : 'dzisiaj';
            }
            return { actualWeather, changeTimeOfTheDay }
          }
      }

      const { createApp } = Vue;
      const app = createApp({
        components: {
	        WeatherSwitch
        },
        template: `
            <main>
                <WeatherSwitch />
            </main>
        `
      })
      app.mount('#app')
    </script>
    <script>

      // Porównując do OOP:

      class User {
        name = 'Michał';
        lastName = 'Kowalski';

        notComputedFullname = this.name + ' ' + this.lastName

        // Computed:
        get fullName() {
          return this.name + ' ' + this.lastName;
        }
      }

      const userMike = new User();

      console.log(userMike.fullName);
      console.log(userMike.notComputedFullname);

      userMike.name = 'Adrian'

      console.log(userMike.fullName);
      console.log(userMike.notComputedFullname);
    </script>
</body>
</html>
