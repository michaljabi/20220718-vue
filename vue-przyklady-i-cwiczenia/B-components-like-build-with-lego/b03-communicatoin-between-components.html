<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Komunikacja pomiÄ™dzy komponentami</title>
    <script src="https://unpkg.com/vue@next"></script>
</head>
<body>
    <!--
        #PrzykÅ‚ad B-03:
        Komunikacja pomiÄ™dzy komponentami w relacji parent-child zachodzi poprzez wykorzystanie tzw. props.
        SÄ… one z perspektywy rodzica jak bindowane "atrybuty" elementu HTML'owego.
        JeÅ›li chodzi o komunikacjÄ™ child-parent - "najczystszym" rozwiÄ…zaniem jest uÅ¼ycie tzw. eventÃ³w i event emitera.
        DostÄ™p do $emit mamy z poziomu pola kaÅ¼dej instancji komponentu w Vue.

        #cel:
        Poznanie podstawowego sposobu komunikacji pomiÄ™dzy komponentami: (data - down (props), events - up ($emit) ).
    -->
    <!--
            @hint: Tutaj dochodzimy do klasycznego SPA, gdzie widaÄ‡ jedynie odniesienie do gÅ‚Ã³wnego id: app w kodzie HTML aplikacji
            Od tej chwili tylko JavaScript (Vue.js) bÄ™dzie rysowaÅ‚ tÄ™ aplikacjÄ™.
    -->
    <div id="app"></div>
    <script>
      const { createApp, ref } = Vue;

      const MyTitle = {
          props: {
            superTitle: String // @hint: Tutaj okreÅ›lamy tzw props'a (nazwa i przeznaczenie podobne jak np. w React) i jego typ
          },
          // Nie jest to konieczne, natomiast dla porzÄ…dku okreÅ›lamy, jakie eventy moÅ¼e emitowaÄ‡ ten komponent:
          emits: ['shout2'],
          // DziÄ™ki zastosowaniu $emit() mamy moÅ¼liwoÅ›Ä‡ komunikacji "w gÃ³rÄ™"
          template: `
            <h2>
                {{superTitle}}
                <button @click="$emit('shout2', {name: 'troll', lastName: 'Mountain'})"> ğŸ‰ </button>
            </h2>
          `
      }


      const app = createApp({
        components: {
            MyTitle
        },
        setup() {
            return {
		        applicationTitle: 'Moja super aplikacja',
	            shoutTheTitle(troll, index) {
		            alert(troll.name + ' - ' + troll.lastName + ' : ' + index)
	            }
	        }
        },
        template: `
            <div>
                <h1>PrzykÅ‚ad komunikacji do komponentu</h1>
                <my-title super-title="Hello World - przykÅ‚adowy tytuÅ‚" v-on:shout2="shoutTheTitle($event, 89)"></my-title>
                <pre>    UWAGA: NasÅ‚uchujemy eventu tylko w komponencie powyÅ¼ej! (patrz: @shout)
                </pre>
                <div>pamiÄ™taj, Å¼e nie musimy przekazywaÄ‡ statycznych wartoÅ›ci, moÅ¼emy coÅ› zbindowaÄ‡:</div>
                <my-title :super-title="applicationTitle" />
                <my-title v-bind:super-title="applicationTitle" />
                <div>PamiÄ™taj, Å¼e bindowanie jest jak "otwarcie Å›wiata" JS po prawej stronie (w Å›rodku " ") </div>
                <my-title :super-title=" 1 + 1 + '100' "></my-title>
            </div>
        `
      })
      app.mount('#app')
    </script>
</body>
</html>
